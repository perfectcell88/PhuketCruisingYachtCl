<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Phuket Cruising Yacht Club - Elite Marine Experience</title> <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&family=Marcellus+SC&family=Sail&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUA6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="logob.png" type="image/png"> <style>
        /* --- CRITICAL INLINE STYLES --- */
        /* Basic Reset & Body Fallback */
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Montserrat', sans-serif; background: #03080f; /* Darker fallback */ }

        /* Loading Overlay - STRICTLY ORIGINAL COLORS + NEW DOTS - Critical Path */
        #loading-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 9999; background: rgba(0,10,20,0.97); /* Darker, more opaque */ opacity: 1;
            transition: opacity 0.8s ease-out; /* Smoother fade */
        }
        #loading-overlay.fade-out { opacity: 0; pointer-events: none; }
        #loading-overlay::before { /* Original Gold Ripple */
            content: ""; position: absolute; width: 200px; height: 200px;
            background: radial-gradient(circle, rgba(249,217,118,0.08), transparent 65%); /* Subtler ripple */
            border-radius: 50%; animation: rippleInline 2.5s ease-out infinite; pointer-events: none;
        }
        @keyframes rippleInline { 0% { transform: scale(0.8); opacity: 0.5; } 100% { transform: scale(2.8); opacity: 0; } }
        #loading-logo-circle-wrapper { position: relative; width: 200px; height: 200px; margin-bottom: 15px; }
        #loading-logo {
            width: 200px; height: 200px; display: block;
            filter: drop-shadow(0 0 8px #f9d976); /* ORIGINAL GOLD */
            opacity: 0; animation: logoPopInline 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 0.3s;
            position: relative; z-index: 2; border-radius: 50%;
        }
        @keyframes logoPopInline { from { opacity: 0; transform: scale(0.7); } to { opacity: 1; transform: scale(1); } }
        #loading-circle {
            position: absolute; top: 0; left: 0; width: 200px; height: 200px;
            pointer-events: none; z-index: 1; animation: spinInline 1.6s linear infinite;
            filter: drop-shadow(0 0 8px #f9d976); /* ORIGINAL GOLD */
        }
        #loading-circle svg { width: 200px; height: 200px; transform-origin: center; }
        @keyframes spinInline { 100% { transform: rotate(360deg); } }
        #loading-circle circle.base { stroke: rgba(249,217,118,0.2); stroke-width: 12; fill: none; } /* Original gold tinted base */
        #loading-circle circle.progress { /* Stroke color via SVG gradient */
            stroke-width: 12; fill: none; stroke-linecap: round;
            stroke-dasharray: 283; stroke-dashoffset: 283; transition: stroke-dashoffset 0.25s ease;
        }
        /* NEW Loading Dots - Inline for critical path */
        #loading-dots { display: flex; justify-content: center; align-items: center; margin-top: 10px; }
        #loading-dots .dot {
            width: 9px; height: 9px; margin: 0 4px; background-color: #f9d976; /* ORIGINAL GOLD */
            border-radius: 50%; animation: loadingDotAnimationInline 1.4s infinite ease-in-out;
        }
        #loading-dots .dot:nth-child(1) { animation-delay: -0.32s; }
        #loading-dots .dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes loadingDotAnimationInline {
            0%, 80%, 100% { transform: scale(0.4); opacity: 0.5; }
            40% { transform: scale(1.0); opacity: 1; }
        }
        /* End Loading Screen Critical Styles */

        /* Captain's Dashboard Intro Box - PRESERVED INLINE STYLES FROM ORIGINAL HTML */
        .glass-box { /* Styles from original index.html for this specific box */
            background: rgba(0, 68, 102, 0.7); /* Original: #004466 with alpha */
            -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px);
            padding: 25px; border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.18);
            box-shadow: 0 8px 32px 0 rgba(0,0,0,0.37);
            max-width: 600px; margin: 30px auto; text-align: center;
        }
        .captain-header { /* Original Styling Preserved */
            font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; font-weight: bold;
            color: #f9d976; /* Original gold */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.50);
            animation: floatCaptainHeader 3s ease-in-out infinite; /* Unique animation name */
        }
        @keyframes floatCaptainHeader { 0%{transform:translateY(0)} 50%{transform:translateY(-3px)} 100%{transform:translateY(0)} }
        .wave-underline { /* Original Styling Preserved */
            width: 200px; height: 4px; margin: 10px auto 20px;
            background: linear-gradient(90deg, #00aaff, #00ffcc, #00aaff);
            background-size: 300% 100%; animation: waveUnderlineAnim 5s ease-in-out infinite;
            border-radius: 2px;
        }
        @keyframes waveUnderlineAnim { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        .captain-subtitle { /* Original Styling Preserved */
            font-family: 'Montserrat', sans-serif; font-size: 0.9rem; color: #eee;
            margin-bottom: 15px; font-style: italic;
        }
        .live-pulse { /* Original Styling Preserved */
            display: inline-flex; align-items: center; gap: 8px;
            font-weight: bold; color: #c60000; /* Original red */
        }
        .live-dot { /* Original Styling Preserved */
            width: 12px; height: 12px; background-color: #c60000; border-radius: 50%;
            box-shadow: 0 0 8px rgba(198,0,0,0.7); animation: pulseDotLive 1.2s infinite;
        }
        @keyframes pulseDotLive { 0%{transform:scale(1);opacity:1} 50%{transform:scale(1.4);opacity:.5} 100%{transform:scale(1);opacity:1} }
        /* End Captain's Dashboard Critical Styles */
    </style>
</head>
<body>
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v22.0" nonce="YOUR_NONCE_HERE"></script> <div id="loading-overlay" role="status" aria-live="polite" aria-busy="true"> <div id="loading-logo-circle-wrapper" aria-hidden="true">
            <img id="loading-logo" src="logob.png" alt="Phuket Cruising Yacht Club Emblem" /> <div id="loading-circle" aria-hidden="true">
                <svg viewBox="0 0 100 100" role="img" aria-label="Loading progress indicator"> <defs>
                        <linearGradient id="loading-gradient-original" x1="1" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="#f9d976"/>
                            <stop offset="50%" stop-color="#ffe57f"/>
                            <stop offset="100%" stop-color="#f9d976"/>
                        </linearGradient>
                    </defs>
                    <circle class="base"    cx="50" cy="50" r="45" />
                    <circle class="progress" cx="50" cy="50" r="45" stroke="url(#loading-gradient-original)"/>
                </svg>
            </div>
        </div>
        <div id="loading-dots" aria-hidden="true">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
    </div>

    <div id="threejs-background" aria-hidden="true"></div> <div id="page-content" aria-hidden="true"> <header class="nav-container" role="banner"> <nav aria-label="Main navigation">
                <a href="#home" class="nav-logo-link" aria-label="Phuket Cruising Yacht Club, Homepage"> <img src="logob.png" alt="Phuket Cruising Yacht Club Logo" class="nav-logo">
                </a>
                <div class="nav-links">
                    <a href="#home" class="nav-link active">Home</a>
                    <a href="#about" class="nav-link">About</a>
                    <a href="#services" class="nav-link">Services</a>
                    <a href="#accommodation" class="nav-link">Stay</a> <a href="#gallery" class="nav-link">Gallery</a>
                    <a href="#contact" class="nav-link">Contact</a>
                </div>
                <a href="https://www.facebook.com/groups/187918071231247" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Follow us on Facebook"> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png" alt="Facebook Icon" class="facebook-logo" style="width:30px; height:30px;">
                </a>
            </nav>
        </header>
        <button class="mobile-menu-btn" aria-label="Open navigation menu" aria-expanded="false" aria-controls="main-nav-links"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>

        <main id="main-scrollable-content-wrapper">
            <section class="home-content" id="home" aria-labelledby="main-home-title">
                <img src="logob.png" alt="Phuket Cruising Yacht Club Emblem" class="main-logo">
                <h1 class="home-title" id="main-home-title">Phuket Cruising Yacht Club</h1>
                <div class="particles-container" id="particles-container" aria-hidden="true"></div>
                
                <div class="hero-welcome">
                    <h2 class="hero-title">The Island's Premier Yacht Club</h2> <p class="hero-subtitle">Your Tranquil Haven in the Andaman Sea</p> </div>

                <div class="elfsight-app-b52fbf80-b063-430d-a25d-4b1d31113389" data-elfsight-app-lazy></div>

                <div class="intro-text">
                    <article class="welcome-section" aria-labelledby="welcome-section-title"> <div class="amenities-grid">
                            <div class="amenity-card">
                                <i class="amenity-icon fas fa-anchor" aria-hidden="true"></i>
                                <h3>Stay & Amenities</h3>
                                <p>Discover seamless services: rentals for transport and leisure craft, secure dinghy mooring, open showers, and abundant charging stations for your convenience.</p>
                            </div>
                            <div class="amenity-card">
                                <i class="amenity-icon fas fa-ship" aria-hidden="true"></i>
                                <h3>Port & Maritime Services</h3>
                                <p>As an authorized port-entrance agent and Royal Thai Customs visa extension provider, we ensure smooth sailing for your arrivals, departures, and accreditations.</p>
                            </div>
                            <div class="amenity-card">
                                <i class="amenity-icon fas fa-glass-martini-alt" aria-hidden="true"></i>
                                <h3>Clubhouse & Dining</h3>
                                <p>Our renovated clubhouse and beach decks welcome you from morning till late. Indulge in happy hour, signature cocktails, and diverse international and local brews.</p>
                            </div>
                        </div>
                        <div class="visit-section">
                            <div class="business-details">
                                <div class="detail-item"> <i class="time-icon fas fa-clock" aria-hidden="true"></i> <span>Open Daily: 12 PM - Late</span> </div>
                                <div class="detail-item"> <i class="location-icon fas fa-map-marker-alt" aria-hidden="true"></i> <span>Soi Sukee, Chalong, Phuket, Thailand</span> </div>
                                <div class="announcement"> <i class="new-icon fas fa-star" aria-hidden="true"></i> <span>Taco Tuesday: Live Music, Drinks & T-Shirt Lotto!</span> </div>
                            </div>
                        </div>
                    </article>
                </div>

                <section class="services-showcase" aria-labelledby="showcase-title">
                    <h3 id="showcase-title">World-Class Experiences Await</h3> <div class="services-grid">
                        <div class="service-highlight"> <i class="icon fas fa-beer" aria-hidden="true"></i> <h4>Vibrant Social Hub</h4> <p>Happy Hour (5-7 PM), signature Margaritas & craft beers.</p> </div>
                        <div class="service-highlight"> <i class="icon fas fa-user-graduate" aria-hidden="true"></i> <h4>Expert Instruction</h4> <p>AYS Accredited Sailing School for all skill levels.</p> </div> <div class="service-highlight"> <i class="icon fas fa-concierge-bell" aria-hidden="true"></i> <h4>Marine Concierge</h4> <p>Brokerage, charters, and comprehensive yacht management.</p> </div> <div class="service-highlight"> <i class="icon fas fa-water" aria-hidden="true"></i> <h4>Premier Facilities</h4> <p>Modern docks, quality equipment, and beachfront relaxation.</p> </div>
                    </div>
                </section>

                <section class="membership-benefits" aria-labelledby="membership-title">
                    <h3 class="elegant-title" id="membership-title">Exclusive Member Privileges</h3>
                    <p class="benefits-intro">Join our esteemed community and unlock significant savings and unparalleled access with your PCYC membership.</p>
                    <div class="benefits-grid">
                        <div class="benefit-category">
                            <h4>Partner Discounts</h4>
                            <ul class="benefits-list">
                                <li>15% off: Rolly Tasker (Exclusive Club Promo)</li>
                                <li>20% off: Ratanachai Shipyard (Haul-outs & Hard-stand)</li>
                                <li>20% off: Royal Langkawi Yacht Club (Berths & F&B)</li>
                                <li>Discounts: Major Phuket Chandleries (AME, Tops, Surapol)</li>
                                <li>Up to 20% off: Chao Fa East Auto Parts</li>
                                <li>15% off: Aqua Master Chalong</li>
                            </ul>
                        </div>
                        <div class="benefit-category">
                            <h4>Club Amenities</h4> <ul class="benefits-list">
                                <li>Member rates on all food & beverages</li>
                                <li>Priority access to special events</li>
                                <li>Complimentary high-speed WiFi</li>
                                <li>Premium shower & changing facilities</li>
                                <li>Event space for up to 100 guests (Clubhouse)</li>
                                <li>Exclusive member-only lounge areas</li>
                                <li>Welcome package & club regalia</li>
                            </ul>
                        </div>
                        <div class="benefit-category">
                            <h4>Maritime Support</h4> <ul class="benefits-list">
                                <li>Preferred rates on boat minding</li>
                                <li>Priority booking for marine services</li>
                                <li>Discounted equipment rentals</li>
                                <li>Access to trusted contractor network</li>
                                <li>Monthly maritime e-newsletter</li>
                                <li>Professional marine consultations</li>
                                <li>24/7 emergency assistance line</li>
                            </ul>
                        </div>
                    </div>
                    <div class="membership-cta">
                        <p>Annual Membership: ฿3,000 (Includes Photo ID, Club T-Shirt & Sticker)</p>
                        <a href="#contact" class="premium-button">Become a Valued Member</a>
                    </div>
                </section>
            
                <div style="margin: var(--space-xl) auto; text-align: center;">
                    <a href="https://www.facebook.com/groups/187918071231247" target="_blank" rel="noopener noreferrer" class="event-link">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png" alt="Facebook Icon" class="facebook-logo">
                        Events & Community Updates
                    </a>
                </div>
                <div class="fb-page" data-href="https://www.facebook.com/groups/187918071231247" data-tabs="timeline" data-width="360" data-height="400" data-small-header="true" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true" style="margin: var(--space-lg) auto var(--space-xl);"></div>

                <section class="glass-box" aria-labelledby="dashboard-intro-title"> <h3 class="captain-header" id="dashboard-intro-title">- Phuket Maritime Dashboard -</h3> <div class="wave-underline" aria-hidden="true"></div>
                    <p class="captain-subtitle">Live Weather Alerts, Wind, Sea Conditions, Tides, UV Index & Moon Phases</p>
                    <div class="live-pulse" aria-label="Live data indicator"><div class="live-dot" aria-hidden="true"></div>LIVE</div>
                </section>

                <section class="widget-grid" aria-label="Maritime Information Widgets"> <div class="captain-widget"> <h4>🌬️ Wind Forecast (Phuket)</h4> <iframe title="Wind Forecast Widget for Phuket" src="https://embed.windy.com/embed2.html?lat=7.880&lon=98.389&zoom=9&level=surface&overlay=wind&menu=&message=&marker=&calendar=now&type=map&location=coordinates&metricWind=kt&metricTemp=°C" frameborder="0"></iframe> </div>
                    <div class="captain-widget"> <h4>🌤️ Weather Forecast (Phuket)</h4> <iframe title="Weather Forecast Widget for Phuket" src="https://www.meteoblue.com/en/weather/widget/daily/phuket_thailand_1151254?geoloc=fixed&days=5&tempunit=CELSIUS&windunit=KNOT&layout=image" frameborder="0" scrolling="no"></iframe> </div>
                    <div class="captain-widget"> <h4>🌧️ Weather Radar (Phuket)</h4> <iframe title="Weather Radar Widget for Phuket" src="https://embed.windy.com/embed2.html?lat=7.888&lon=98.392&zoom=7&overlay=radar&menu=&message=&marker=&calendar=now&type=map&location=coordinates" frameborder="0" style="border:none; overflow:hidden;" allowtransparency="true"></iframe> </div>
                    <div class="captain-widget"> <h4>🔆 UV Index (Phuket)</h4> <iframe title="UV Index Widget for Phuket" src="https://embed.windy.com/embed2.html?lat=7.729&lon=98.138&zoom=9&level=surface&overlay=uvindex&menu=&message=true&marker=&calendar=now&type=map&location=coordinates&metricWind=default&metricTemp=default&radarRange=-1" frameborder="0" scrolling="no" style="border:none; overflow:hidden;"></iframe> </div>
                    <div class="captain-widget"> <h4>🚢 Live Ship Tracker</h4> <iframe title="Live AIS Ship Tracker Widget" src="https://www.marinetraffic.com/en/ais/embed/zoom:10/centery:7.880/centerx:98.389/maptype:1/shownames:false/mmsi:0" frameborder="0"></iframe> </div>
                    <div class="captain-widget"> <h4>🌡️ Sea Surface Temp (Phuket)</h4> <iframe title="Sea Surface Temperature Widget for Phuket" src="https://embed.windy.com/embed2.html?lat=7.582&lon=98.135&zoom=9&level=surface&overlay=sst&menu=&message=true&marker=&calendar=now&type=map&location=coordinates&metricWind=default&metricTemp=default&radarRange=-1" frameborder="0" scrolling="no" style="border:none; overflow:hidden;"></iframe> </div>
                    <div class="captain-widget"> <h4>🌊 Tide Info (Phuket)</h4> <iframe title="Tide Information Widget for Phuket" src="https://marea.ooo/en/widget/7.8465199/98.3344152?padding=m&components=text%2Cchart&background=transparent&theme=dark" style="background-color: transparent; border: none;" allow="geolocation"></iframe> </div>
                    <div class="captain-widget"> <h4>⛽ Fuel Docks (Phuket)</h4> <iframe title="Fuel Docks Map near Phuket" src="https://www.google.com/maps/d/embed?mid=1TleOY4hTm89B9cThLBdIYN_ZXpvgaFg&ehbc=2E312F&noprof=1" style="border:0;" allowfullscreen loading="lazy"></iframe> </div> <div class="captain-widget" style="width: 300px; margin: 0 auto;"> <h4>🌕 Moon Phase</h4> <a target="_blank" rel="noopener noreferrer" style="text-decoration:none;" href="https://moonphase.guide/" aria-label="View current moon phase on moonphase.guide"> <img src="https://moonphase.guide/module/MWE5MNnJyNWRtZlJlTTY1Uk9LQ2h0V1gydEVwbkRkS0QrLzBEaDRCeC9TbEhVUklsWVJlWHNEOG9uOGhINXhvc3Jid2FacjA4alVSL1ZlRWxVTzg4ZGc9PQ.png" alt="Current Moon Phase" style="width: 100%; height: auto; max-width:260px; object-fit: contain; display: block; margin: 0 auto;" border="0" /> </a> </div>
                </section>
                <div style="height: var(--space-xl);"></div> </section>


            <div id="about" class="content-section" role="dialog" aria-modal="true" aria-labelledby="about-title">
                <div class="content-container">
                    <button class="close-btn" data-target="about" aria-label="Close About Us section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="about-title">Our Story & Vision</h2> <p>Welcome to the Phuket Cruising Yacht Club – where maritime passion meets unparalleled hospitality. We are more than just a club; we are a vibrant community, a sanctuary for world cruisers, seasoned expatriates, and sailing enthusiasts alike.</p>
                    <p>Our ethos is simple: to inform, entertain, and provide a distinguished home base in the heart of Phuket. Here, every guest is treated with the same warmth and afforded the same exceptional value as our esteemed members.</p>
                    <p>Indulge in ice-cold refreshments, savor delectable cuisine, and forge lasting connections. The PCYC stands as Phuket's premier full-service yacht club, dedicated to creating memorable experiences on and off the water.</p>
                    <div class="reviews-section" aria-labelledby="member-reviews-title">
                        <h3 id="member-reviews-title">Hear From Our Community</h3>
                        <script src="https://static.elfsight.com/platform/platform.js" async defer></script>
                        <div class="elfsight-app-b52fbf80-b063-430d-a25d-4b1d31113389" data-elfsight-app-lazy></div>
                    </div>
                </div>
            </div>

            <div id="services" class="content-section" role="dialog" aria-modal="true" aria-labelledby="services-title">
                <div class="content-container services-container">
                    <button class="close-btn" data-target="services" aria-label="Close Services section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="services-title">Comprehensive Marine Services</h2> <p class="services-intro">At PCYC, excellence is our standard. We deliver a complete suite of maritime services with meticulous attention to detail and unwavering expertise, ensuring your every need is met.</p>
                    <div class="services-highlights">
                        <div class="highlight-stat"> <span class="stat-number">24/7</span> <span class="stat-label">Dedicated Support</span> </div>
                        <div class="highlight-stat"> <span class="stat-number">15+</span> <span class="stat-label">Years of Expertise</span> </div>
                        <div class="highlight-stat"> <span class="stat-number">500+</span> <span class="stat-label">Satisfied Seafarers</span> </div> </div>
                    <div class="services-grid popup-grid"> <article class="service-card"> <div class="service-icon" aria-hidden="true">⚓</div> <h3>Port & Immigration</h3> <div class="service-details"> <h4>Thai Customs & Visa</h4><p>Authorized agent for port entrance and Royal Thai Customs yacht visa extensions.</p> <h4>Arrival & Departure</h4><p>Streamlined Immigration processes and customs accreditation for your vessel.</p> <h4>Extended Stays</h4><p>Facilitation of six-month stays with available extension options.</p> </div> </article>
                        <article class="service-card"> <div class="service-icon" aria-hidden="true">🛥️</div> <h3>Full-Spectrum Maritime</h3> <div class="service-details"> <h4>Yacht Brokerage</h4><p>Professional brokerage for buying, selling, or upgrading your yacht.</p> <h4>Charter Management</h4><p>Bespoke charter arrangements and comprehensive management.</p> <h4>Salvage & Legal</h4><p>Expert marine salvage, recovery, and specialized maritime legal counsel.</p> </div> </article>
                        <article class="service-card"> <div class="service-icon" aria-hidden="true">🔧</div> <h3>Equipment & Logistics</h3> <div class="service-details"> <h4>Marine Parts</h4><p>Sourcing for quality new and pre-owned marine equipment.</p> <h4>Vessel Care</h4><p>Diligent boat minding, monitoring, and maintenance programs.</p> <h4>Gear Rentals</h4><p>RIBs, tender outboards, dinghies, and other essential gear available.</p> </div> </article>
                        <article class="service-card"> <div class="service-icon" aria-hidden="true">🏠</div> <h3>Shoreline Comforts</h3> <div class="service-details"> <h4>Transport Rentals</h4><p>Convenient car and motorcycle rentals for island exploration.</p> <h4>Beach Bungalows</h4><p>Charming beachfront accommodations for a restful stay.</p> <h4>Dinghy Security</h4><p>Secure, flood-lit dinghy lines directly in front of the clubhouse.</p> </div> </article> <article class="service-card"> <div class="service-icon" aria-hidden="true">⛵</div> <h3>Training & Development</h3> <div class="service-details"> <h4>AYS Sailing Academy</h4><p>Accredited sailing and powerboat seamanship courses for all levels.</p> <h4>Advanced Maritime</h4><p>Professional development programs and industry certifications.</p> <h4>Practical On-Water</h4><p>Hands-on training with highly experienced, certified instructors.</p> </div> </article>
                        <article class="service-card"> <div class="service-icon" aria-hidden="true">🚿</div> <h3>Club Facilities</h3> <div class="service-details"> <h4>Refresh & Recharge</h4><p>Immaculate shower facilities open to all members and visitors.</p> <h4>Connectivity Hub</h4><p>Multiple charging stations and high-speed Wi-Fi access.</p> <h4>Trusted Network</h4><p>Access to our curated list of preferred marine service contractors.</p> </div> </article> </div>
                    <div class="service-cta">
                        <p>Connect with Captain Brent for personalized maritime solutions.</p>
                        <a href="#contact" class="premium-button">Inquire About Services</a>
                    </div>
                </div>
            </div>

            <div id="accommodation" class="content-section" role="dialog" aria-modal="true" aria-labelledby="accommodation-title">
                <div class="content-container">
                    <button class="close-btn" data-target="accommodation" aria-label="Close Accommodation section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="accommodation-title">Beachfront Bungalows</h2>
                    <p style="text-align:center;">Retreat to comfort in our charming beach bungalows, perfectly positioned for sailors and island explorers seeking tranquility by the sea.</p>
                    <div class="accommodation-grid">
                        <article class="bungalow-card"> <img src="images/sailboat-414509_1280.jpg" alt="Serene Standard Bungalow with sea view" class="bungalow-img"> <div class="bungalow-info"> <h3 class="bungalow-title">Standard Bungalow</h3> <p class="bungalow-price">From ฿1,500 / night</p> <p class="bungalow-desc">Cozy beachfront comfort with essential amenities, ideal for solo adventurers or couples.</p> <a href="#contact" class="book-btn">Check Availability</a> </div> </article>
                        <article class="bungalow-card"> <img src="images/beautiful-woman-yacht-swimwear.jpg" alt="Spacious Deluxe Bungalow with premium features" class="bungalow-img"> <div class="bungalow-info"> <h3 class="bungalow-title">Deluxe Bungalow</h3> <p class="bungalow-price">From ฿2,500 / night</p> <p class="bungalow-desc">Generous space, premium amenities, and stunning ocean vistas for an elevated stay.</p> <a href="#contact" class="book-btn">Check Availability</a> </div> </article>
                        <article class="bungalow-card"> <img src="images/75380478_10156391073797175_4972174924367003648_n.jpg" alt="Large Family Bungalow suitable for groups" class="bungalow-img"> <div class="bungalow-info"> <h3 class="bungalow-title">Family Bungalow</h3> <p class="bungalow-price">From ฿3,500 / night</p> <p class="bungalow-desc">Multiple rooms offering ample space for families or groups creating Phuket memories.</p> <a href="#contact" class="book-btn">Check Availability</a> </div> </article>
                    </div>
                </div>
            </div>

            <div id="gallery" class="content-section" role="dialog" aria-modal="true" aria-labelledby="gallery-title">
                <div class="content-container">
                    <button class="close-btn" data-target="gallery" aria-label="Close Gallery section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="gallery-title">Visual Journey</h2>
                    <p style="text-align:center;">Immerse yourself in the vibrant life and scenic beauty of the Phuket Cruising Yacht Club and its surroundings through our curated gallery.</p>
                    <div id="gallery-container" class="gallery-grid" aria-live="polite"> </div>
                </div>
            </div>

            <div id="contact" class="content-section" role="dialog" aria-modal="true" aria-labelledby="contact-title">
                <div class="content-container">
                    <button class="close-btn" data-target="contact" aria-label="Close Contact Us section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="contact-title">Get In Touch</h2>
                    <p style="text-align:center;">We welcome your inquiries. Whether you're considering membership, have service questions, or wish to learn more about PCYC, our team is ready to assist.</p>
                    <div class="contact-form">
                        <form id="contact-form" action="YOUR_FORM_SUBMISSION_URL" method="POST"> <div class="form-group"> <label for="name">Full Name</label> <input type="text" id="name" name="name" class="form-control" required autocomplete="name"> </div>
                            <div class="form-group"> <label for="email">Email Address</label> <input type="email" id="email" name="email" class="form-control" required autocomplete="email"> </div>
                            <div class="form-group"> <label for="subject">Subject</label> <input type="text" id="subject" name="subject" class="form-control" required> </div>
                            <div class="form-group"> <label for="message">Your Message</label> <textarea id="message" name="message" class="form-control" rows="5" required></textarea> </div>
                            <button type="submit" class="submit-btn">Send Message</button>
                        </form>
                        <div class="form-success" role="alert">Your message has been sent successfully! We'll be in touch shortly.</div>
                    </div>
                    <p style="text-align:center; margin-top:var(--space-lg);">Or connect with us directly:
                        <a href="https://www.facebook.com/groups/187918071231247" target="_blank" rel="noopener noreferrer" class="event-link" style="display:inline-flex; background:transparent; border:none; padding:0.2rem 0.5rem; color: var(--muted-gold-highlight); vertical-align: middle;">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png" alt="Facebook Icon" class="facebook-logo" style="filter:none; width:20px; height:20px;">
                            Facebook
                        </a>
                    </p>
                </div>
            </div>
        </main>
    </div>

    <script type="module">
        import * as THREE from './js/three.module.js';
        import { OrbitControls } from './js/controls/OrbitControls.js';
        import { Water } from './js/objects/Water.js';
        import { Sky } from './js/objects/Sky.js';

        const overlay = document.getElementById('loading-overlay');
        const prog = document.querySelector('#loading-circle circle.progress');
        const pageContent = document.getElementById('page-content');
        const mainScrollableContentWrapper = document.getElementById('main-scrollable-content-wrapper');
        const navContainer = document.querySelector('.nav-container');
        const homeContent = document.querySelector('.home-content'); // Used for particle positioning
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navLinksContainer = document.querySelector('.nav-links'); // This is the ul/div holding the links
        let progressVal = 0;

        // Mobile Menu Toggle
        if (mobileMenuBtn && navLinksContainer) {
            mobileMenuBtn.addEventListener('click', () => {
                const isOpen = navLinksContainer.classList.toggle('open');
                mobileMenuBtn.setAttribute('aria-expanded', isOpen.toString());
                mobileMenuBtn.innerHTML = isOpen ?
                    `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><title>Close menu</title><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>` :
                    `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><title>Open menu</title><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>`;
                // Toggle ARIA label on button
                mobileMenuBtn.setAttribute('aria-label', isOpen ? 'Close navigation menu' : 'Open navigation menu');
            });
        }

        const navLinkElements = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');

        function updateActiveLink(targetId) {
            navLinkElements.forEach(l => l.classList.remove('active'));
            const activeLink = document.querySelector(`.nav-link[href="#${targetId}"]`);
            if (activeLink) activeLink.classList.add('active');
        }
        
        function showSection(targetId) {
            let sectionActivated = false;
            contentSections.forEach(section => {
                const sectionElement = section; // Ensure it's an HTMLElement
                if (sectionElement.id === targetId) {
                    sectionElement.classList.add('active');
                    sectionElement.setAttribute('aria-hidden', 'false');
                    const focusable = sectionElement.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                    if (focusable) focusable.focus(); // Focus first focusable element
                    sectionActivated = true;
                } else {
                    sectionElement.classList.remove('active');
                    sectionElement.setAttribute('aria-hidden', 'true');
                }
            });

            if (sectionActivated && targetId !== 'home') {
                document.body.classList.add('overlay-active');
            } else {
                document.body.classList.remove('overlay-active');
                if (homeContent) homeContent.classList.remove('hidden-for-overlay'); // Make sure home is visible
            }
            updateActiveLink(targetId);
        }

        navLinkElements.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                if (navLinksContainer && navLinksContainer.classList.contains('open')) { // Close mobile menu
                    navLinksContainer.classList.remove('open');
                    mobileMenuBtn.setAttribute('aria-expanded', 'false');
                    mobileMenuBtn.setAttribute('aria-label', 'Open navigation menu');
                    mobileMenuBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><title>Open menu</title><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>`;
                }
                showSection(targetId);
                if (targetId === 'home' && mainScrollableContentWrapper) {
                    mainScrollableContentWrapper.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });
        });
        
        // JS Error Fix: Correctly declare closeButtons with const
        const closeButtons = document.querySelectorAll('.close-btn');
        closeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const targetSectionId = btn.getAttribute('data-target');
                const targetSectionElement = document.getElementById(targetSectionId);
                if (targetSectionElement) {
                     targetSectionElement.classList.remove('active');
                     targetSectionElement.setAttribute('aria-hidden', 'true');
                }
                document.body.classList.remove('overlay-active');
                if (homeContent) homeContent.classList.remove('hidden-for-overlay');
                updateActiveLink('home'); // Default to home active
                 if (mainScrollableContentWrapper) {
                    mainScrollableContentWrapper.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });
        });
        
        // Contact Form (Placeholder for actual submission)
        const contactForm = document.getElementById('contact-form');
        const formSuccess = document.querySelector('.form-success');
        if (contactForm && formSuccess) {
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevent actual submission for now
                // Simulate form submission
                formSuccess.classList.add('visible');
                formSuccess.setAttribute('aria-hidden', 'false');
                contactForm.reset();
                setTimeout(() => {
                    formSuccess.classList.remove('visible');
                    formSuccess.setAttribute('aria-hidden', 'true');
                }, 6000); // Display success for 6 seconds
            });
        }

        // Water Particles (Visual flair, kept from original logic)
        function createWaterParticles() {
            const particlesContainer = document.getElementById('particles-container');
            const titleElement = document.querySelector('.home-title');
            if (!particlesContainer || !titleElement || !homeContent || !mainScrollableContentWrapper) {
                // console.warn("Water particle elements missing.");
                return;
            }
            particlesContainer.innerHTML = ''; // Clear existing
            const titleRect = titleElement.getBoundingClientRect();
            const homeContentRect = homeContent.getBoundingClientRect(); // Ensure homeContent is defined
            for (let i = 0; i < 12; i++) { // Slightly more particles for effect
                const particle = document.createElement('div'); particle.classList.add('water-particle');
                const relativeX = (titleRect.left - homeContentRect.left) + Math.random() * titleRect.width - 10 + (Math.random() * 30 - 15);
                const relativeY = (titleRect.top - homeContentRect.top) + Math.random() * titleRect.height - 5 + (Math.random() * 15 - 7);
                particle.style.left = `${relativeX}px`; particle.style.top = `${relativeY}px`;
                particle.style.animationDelay = `${Math.random() * 3}s`; // Varied delay
                particlesContainer.appendChild(particle);
            }
        }
        
        // Inquiry Button Logic (Prefill contact form subject)
        document.querySelectorAll('.book-btn, .premium-button[href="#contact"], .service-cta .premium-button').forEach(btn => {
            if (btn.getAttribute('href') === '#contact') {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (navLinksContainer && navLinksContainer.classList.contains('open')) { // Close mobile nav
                        navLinksContainer.classList.remove('open'); mobileMenuBtn.setAttribute('aria-expanded', 'false');
                        mobileMenuBtn.setAttribute('aria-label', 'Open navigation menu');
                        mobileMenuBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><title>Open menu</title><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>`;
                    }
                    showSection('contact'); // Show contact popup
                    setTimeout(() => { // Delay to ensure section is visible before focusing
                        const subjectField = document.getElementById('subject');
                        if (subjectField) {
                            let inquirySubject = "General Inquiry"; // Default
                            const bungalowCard = btn.closest('.bungalow-card');
                            const membershipCTA = btn.closest('.membership-cta');
                            const serviceCTA = btn.closest('.service-cta');

                            if (bungalowCard) {
                                const bungalowTitle = bungalowCard.querySelector('.bungalow-title')?.textContent;
                                inquirySubject = bungalowTitle ? `Inquiry: ${bungalowTitle}` : "Bungalow Inquiry";
                            } else if (membershipCTA) { inquirySubject = "Membership Inquiry";
                            } else if (serviceCTA) { inquirySubject = "Service Inquiry"; }
                            
                            subjectField.value = inquirySubject;
                            subjectField.focus(); // Focus subject field
                        }
                    }, 200); // Slightly longer delay for smoother transition
                });
            }
        });

        // Three.js Scene Initialization (WebGL Background)
           function initScene() {
            const threeJsBackground = document.getElementById('threejs-background'); // Get the container
            if (!threeJsBackground) { // Check if container exists
                console.warn("Three.js background container not found. Skipping scene initialization.");
                return;
            }
            const container = document.createElement('div');
            threeJsBackground.appendChild(container); // Append to the background div

            const camera = new THREE.PerspectiveCamera(55, window.innerWidth/window.innerHeight, 1, 20000);
            camera.position.set(30, 30, 100);

            const scene = new THREE.Scene();
            const sun = new THREE.Vector3();

            // Water
            const waterGeom = new THREE.PlaneGeometry(10000, 10000);
            const water = new Water(waterGeom, {
                textureWidth: 512, textureHeight: 512,
                waterNormals: new THREE.TextureLoader().load('textures/waternormals.jpg', tex => {
                    tex.wrapS = tex.wrapT = THREE.RepeatWrapping;
                }),
                sunDirection: new THREE.Vector3(),
                sunColor: 0xffcc66, waterColor: 0x226666,
                distortionScale: 3.7, fog: false
            });
            water.rotation.x = -Math.PI/2;
            scene.add(water);

            // Sky
            const sky = new Sky();
            sky.scale.setScalar(10000);
            scene.add(sky);
            const uni = sky.material.uniforms;
            uni.turbidity.value = 10;
            uni.rayleigh.value = 2;
            uni.mieCoefficient.value = 0.005;
            uni.mieDirectionalG.value = 0.8;

            const phi = THREE.MathUtils.degToRad(90), theta = THREE.MathUtils.degToRad(180);
            sun.setFromSphericalCoords(1, phi, theta);
            uni.sunPosition.value.copy(sun);
            water.material.uniforms.sunDirection.value.copy(sun).normalize();

            // Renderer
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // Controls
            const controls = new OrbitControls(camera, renderer.domElement);
            controls.maxPolarAngle = Math.PI*0.495;
            controls.minDistance = 40; controls.maxDistance = 200;
            controls.target.copy(sun.clone().multiplyScalar(100));
            controls.update();
            // --- ADDED: Disable zoom controls ---
            controls.enableZoom = false;
            // ------------------------------------

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth/window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                // Re-create water particles on resize if home content is visible
                if (homeContent && homeContent.classList.contains('visible')) { // Check if homeContent exists
                    createWaterParticles();
                }
            });

            // Animate
            function animate() {
                requestAnimationFrame(animate);
                water.material.uniforms.time.value += 1/60;
                renderer.render(scene, camera);
            }
            animate();

            // Show navigation and home content after scene is initialized
            setTimeout(() => {
                if (navContainer) navContainer.classList.add('visible'); // Check if navContainer exists
                if (homeContent) { // Check if homeContent exists
                    homeContent.classList.add('visible'); // Keeps home-content visible by default
                    createWaterParticles();
                }
            }, 1000);
        }

        // Loading Simulation & Scene Initialization
        const loadingInterval = setInterval(() => { // Renamed to avoid conflict
            progressVal = Math.min(100, progressVal + Math.random() * 8 + 4); // Adjusted speed
            const circumference = 2 * Math.PI * 45;
            if (prog) prog.style.strokeDashoffset = circumference * (1 - progressVal / 100);
            if (progressVal >= 100) {
                clearInterval(loadingInterval);
                if (overlay) overlay.classList.add('fade-out');
                setTimeout(() => {
                    if (overlay) overlay.remove();
                    initScene(); // Initialize Three.js scene after loading
                    if (pageContent) {
                        pageContent.setAttribute('aria-hidden', 'false');
                        pageContent.classList.add('visible');
                    }
                }, 700); // Delay after fade-out before showing content
            }
        }, 180); // Slightly faster interval

        // Gallery Image Loading
        const galleryContainer = document.getElementById('gallery-container');
        if (galleryContainer) {
            const galleryImages = [ /* Original images */
                { src: 'images/beautiful-woman-yacht-swimwear.jpg', alt: 'Elegant woman enjoying the sundeck of a luxury yacht in Phuket\'s azure waters.' }, { src: 'images/473599725_10160435212412175_501266893980304214_n.jpg', alt: 'A majestic yacht sailing gracefully across the open sea near Phuket.' }, { src: 'images/148872788_3169037883196094_849598998136454814_n.jpg', alt: 'Members and guests enjoying a social gathering at the Phuket Cruising Yacht Club.' }, { src: 'images/118274592_10157223767507175_1027198816200289080_n.jpg', alt: 'Dynamic shot of a sailboat cutting through the waves during a Phuket regatta.' }, { src: 'images/75380478_10156391073797175_4972174924367003648_n.jpg', alt: 'Aerial view of a pristine white yacht anchored in a secluded Phuket bay.' }, { src: 'images/463398656_7798563456910157_6872878179612088792_n.jpg', alt: 'Deliciously prepared fresh seafood platter served at the Yacht Club restaurant.' }, { src: 'images/468066240_10102904678842276_3997282509366841665_n.jpg', alt: 'Group of smiling yacht club members posing for a photo during an event.' }, { src: 'images/464508298_8693886117336396_5575655286860524176_n.jpg', alt: 'Close-up of a modern sailing yacht with its sails perfectly trimmed.' }, { src: 'images/sailboat-414509_1280.jpg', alt: 'Silhouette of a sailboat against a breathtaking Phuket sunset over the Andaman Sea.' } ];
            galleryImages.forEach(image => {
                const galleryItem = document.createElement('div'); galleryItem.className = 'gallery-item';
                const img = document.createElement('img'); img.src = image.src; img.alt = image.alt; img.loading = 'lazy';
                galleryItem.appendChild(img); galleryContainer.appendChild(galleryItem);
                galleryItem.addEventListener('click', () => {
                    const lightbox = document.createElement('div'); lightbox.className = 'lightbox';
                    const lightboxImg = document.createElement('img'); lightboxImg.src = image.src; lightboxImg.alt = image.alt;
                    lightbox.appendChild(lightboxImg); document.body.appendChild(lightbox);
                    // Close lightbox on click anywhere on the lightbox overlay
                    lightbox.addEventListener('click', () => { lightbox.remove(); });
                });
            });
        }
        
        // Auto-refresh Maritime Dashboard iframes (Kept from original functionality)
        // Your original script had this, so it's preserved.
        const localTimeElement = document.getElementById('localTime'); // Check if this element exists from your original HTML. If not, remove this block.
        if (localTimeElement) {
             function updateLocalTime() {
                const now = new Date();
                const options = { timeZone: 'Asia/Bangkok', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
                localTimeElement.textContent = `Current Local Time: ${now.toLocaleTimeString('en-GB', options)}`;
            }
            setInterval(updateLocalTime, 1000);
            updateLocalTime(); // Initial call
        }

        setInterval(() => {
            document.querySelectorAll('.captain-widget iframe').forEach(iframe => { // Targets only dashboard iframes
                try { iframe.src = iframe.src; } catch (e) { /* console.warn("Error refreshing iframe:", e); */ }
            });
        }, 15 * 60 * 1000); // 15 minutes

        // Ensure home is active on initial load
        document.addEventListener('DOMContentLoaded', () => {
            updateActiveLink('home');
            if (pageContent.classList.contains('visible') && homeContent && !document.body.classList.contains('overlay-active') && !contentSections.some(s => s.classList.contains('active'))) {
                 // This might be too early if Three.js scene isn't ready, handled by loading sequence.
            }
        });

    </script>
</body>
</html>
